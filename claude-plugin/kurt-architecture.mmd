graph TB
    subgraph "Entry Points"
        Hook[user-prompt-submit-hook]
        CreateProfile["/create-profile"]
        UpdateProfile["/update-profile"]
        CreateProject["/create-project"]
        ResumeProject["/resume-project"]
        CloneProject["/clone-project"]
    end

    subgraph "Skills"
        subgraph "onboarding-skill"
            Onboarding[onboarding-skill]
            OnbQuestionnaire[questionnaire]
            OnbMapContent[map-content]
            OnbSetupAnalytics[setup-analytics]
            OnbExtractFoundation[extract-foundation]
            OnbCreateProfile[create-profile]
            OnbUpdateProfile[update-profile]
        end

        subgraph "project-management-skill"
            ProjectMgmt[project-management-skill]
            PmCreateProject[create-project]
            PmResumeProject[resume-project]
            PmCloneProject[clone-project]
            PmCheckOnboarding[check-onboarding]
            PmGatherSources[gather-sources]
            PmExtractRules[extract-rules]
        end

        subgraph "intelligence-skill"
            Intelligence[intelligence-skill]
            IntAnalytics[analytics: top, bottom, trending, declining, summary, check]
            IntResearch[research: search, list, get, reddit, hackernews, feeds]
            IntContentIntel[content-intelligence: identify-affected, audit-traffic, impact-estimate, compare-*]
        end

        subgraph "cms-interaction-skill"
            CMS[cms-interaction-skill]
            CmsOnboard[onboard]
            CmsSearch[search]
            CmsPublish[publish]
        end

        subgraph "content-writing-skill"
            Content[content-writing-skill]
            ContentDraft[draft-content]
            ContentOutline[outline-content]
            ContentEdit[edit-content]
            ContentFeedback[feedback-content]
        end

        subgraph "writing-rules-skill"
            Rules[writing-rules-skill]
            RulesExtractPublisher[extract-publisher-profile]
            RulesExtractStyle[extract-style]
            RulesExtractStructure[extract-structure]
            RulesExtractPersona[extract-persona]
            RulesManage[manage-*: add, list, show, validate, update]
        end

        subgraph "feedback-skill"
            Feedback[feedback-skill]
            FbRate[rate]
            FbDashboard[dashboard]
            FbPatterns[patterns]
        end
    end

    subgraph "Kurt Core CLI"
        ContentCmds["kurt content<br/>(list, get-metadata, fetch, map, index, cluster)"]
        CMSCmds["kurt cms<br/>(onboard, search, fetch, publish, types)"]
        ResearchCmds["kurt research<br/>(search, list, get)"]
    end

    subgraph "Data/Config"
        DB[(kurt.sqlite)]
        Profile[.kurt/profile.md]
        CMSConfig[.kurt/cms-config.json]
        RulesDir[.kurt/rules/**]
        ProjectMD[projects/*/project.md]
        Sources[sources/]
        Drafts[projects/*/drafts/]
    end

    subgraph "Templates"
        T1[weekly-tutorial]
        T2[product-launch]
        T3[tutorial-refresh]
        T4[documentation-audit]
        T5[gap-analysis]
        T6[competitive-analysis]
    end

    %% Entry to Skills
    Hook -.checks.-> ProjectMgmt
    CreateProfile --> Onboarding
    UpdateProfile --> Onboarding
    CreateProject --> ProjectMgmt
    ResumeProject --> ProjectMgmt
    CloneProject --> ProjectMgmt

    %% Skill Dependencies
    Onboarding --> Rules
    Onboarding --> ContentCmds
    ProjectMgmt --> Onboarding
    ProjectMgmt --> Intelligence
    ProjectMgmt --> Rules
    ProjectMgmt --> ContentCmds
    Intelligence --> ContentCmds
    Intelligence --> ResearchCmds
    CMS --> CMSCmds
    Content --> Rules
    Content -.optional.-> Feedback
    Feedback -.recommends.-> Rules

    %% Templates
    CloneProject -.uses.-> T1
    CloneProject -.uses.-> T2
    CloneProject -.uses.-> T3
    CloneProject -.uses.-> T4
    CloneProject -.uses.-> T5
    CloneProject -.uses.-> T6

    %% Data Flow
    ContentCmds --> DB
    ContentCmds --> Sources
    CMSCmds --> DB
    CMSCmds --> Sources
    ResearchCmds --> Sources
    Onboarding --> Profile
    Onboarding --> RulesDir
    CMS --> CMSConfig
    ProjectMgmt --> ProjectMD
    Rules --> RulesDir
    Content --> Drafts
    Feedback --> DB

    %% Styling by Node Type
    %% Hook (single node) - Deep Blue
    style Hook fill:#1565c0,stroke:#fff,stroke-width:2px,color:#fff

    %% Slash Commands - Orange
    style CreateProfile fill:#f57c00,stroke:#fff,stroke-width:2px,color:#fff
    style UpdateProfile fill:#f57c00,stroke:#fff,stroke-width:2px,color:#fff
    style CreateProject fill:#f57c00,stroke:#fff,stroke-width:2px,color:#fff
    style ResumeProject fill:#f57c00,stroke:#fff,stroke-width:2px,color:#fff
    style CloneProject fill:#f57c00,stroke:#fff,stroke-width:2px,color:#fff

    %% Skills - Purple
    style Onboarding fill:#7b1fa2,stroke:#fff,stroke-width:2px,color:#fff
    style ProjectMgmt fill:#7b1fa2,stroke:#fff,stroke-width:2px,color:#fff
    style Intelligence fill:#7b1fa2,stroke:#fff,stroke-width:2px,color:#fff
    style CMS fill:#7b1fa2,stroke:#fff,stroke-width:2px,color:#fff
    style Content fill:#7b1fa2,stroke:#fff,stroke-width:2px,color:#fff
    style Rules fill:#7b1fa2,stroke:#fff,stroke-width:2px,color:#fff
    style Feedback fill:#7b1fa2,stroke:#fff,stroke-width:2px,color:#fff

    %% Kurt Core CLI - Green
    style ContentCmds fill:#388e3c,stroke:#fff,stroke-width:2px,color:#fff
    style CMSCmds fill:#388e3c,stroke:#fff,stroke-width:2px,color:#fff
    style ResearchCmds fill:#388e3c,stroke:#fff,stroke-width:2px,color:#fff

    %% Data/Config - Amber
    style DB fill:#ffa726,stroke:#fff,stroke-width:2px,color:#333
    style Profile fill:#ffa726,stroke:#fff,stroke-width:2px,color:#333
    style CMSConfig fill:#ffa726,stroke:#fff,stroke-width:2px,color:#333
    style RulesDir fill:#ffa726,stroke:#fff,stroke-width:2px,color:#333
    style ProjectMD fill:#ffa726,stroke:#fff,stroke-width:2px,color:#333
    style Sources fill:#ffa726,stroke:#fff,stroke-width:2px,color:#333
    style Drafts fill:#ffa726,stroke:#fff,stroke-width:2px,color:#333

    %% Templates - Slate Gray
    style T1 fill:#546e7a,stroke:#fff,stroke-width:2px,color:#fff
    style T2 fill:#546e7a,stroke:#fff,stroke-width:2px,color:#fff
    style T3 fill:#546e7a,stroke:#fff,stroke-width:2px,color:#fff
    style T4 fill:#546e7a,stroke:#fff,stroke-width:2px,color:#fff
    style T5 fill:#546e7a,stroke:#fff,stroke-width:2px,color:#fff
    style T6 fill:#546e7a,stroke:#fff,stroke-width:2px,color:#fff

    %% Subskills - Teal (distinct from parent skills)
    style OnbQuestionnaire fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style OnbMapContent fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style OnbSetupAnalytics fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style OnbExtractFoundation fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style OnbCreateProfile fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style OnbUpdateProfile fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style PmCreateProject fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style PmResumeProject fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style PmCloneProject fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style PmCheckOnboarding fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style PmGatherSources fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style PmExtractRules fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style IntAnalytics fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style IntResearch fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style IntContentIntel fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style CmsOnboard fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style CmsSearch fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style CmsPublish fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style ContentDraft fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style ContentOutline fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style ContentEdit fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style ContentFeedback fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style RulesExtractPublisher fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style RulesExtractStyle fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style RulesExtractStructure fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style RulesExtractPersona fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style RulesManage fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style FbRate fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style FbDashboard fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
    style FbPatterns fill:#00796b,stroke:#fff,stroke-width:1px,color:#fff
