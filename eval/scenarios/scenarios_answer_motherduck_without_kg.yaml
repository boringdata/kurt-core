---
# Kurt Evaluation Scenarios - MotherDuck Question Answering (WITHOUT Knowledge Graph)
#
# Tests the baseline approach without knowledge graph (pure vector search)
# Each question runs in a separate conversational scenario

scenarios:
- name: answer_motherduck_without_kg_q1
  description: Answer Q1 about file formats via conversational mode
  conversational: true
  setup_commands:
  - uv run --project /Users/julien/Documents/wik/wikumeo/projects/kurt-core python
    /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/load_dump.py
    motherduck --skip-entities
  initial_prompt: 'Search through the .kurt/sources/ directory to answer this question:


    What file formats are most efficient for loading data into MotherDuck?


    Please:

    1. Search for relevant markdown files in .kurt/sources/

    2. Read the most relevant files

    3. Write a comprehensive answer in markdown format to: /tmp/answer_without_kg_1.md

    4. Include a "Sources" section listing the files you used

    '
  assertions:
  - type: FileExists
    path: /tmp/answer_without_kg_1.md
  - type: FileContains
    path: /tmp/answer_without_kg_1.md
    content: Parquet
  post_scenario_commands:
  - LATEST_JSON=$(ls -t /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q1/*.json
    2>/dev/null | grep -v '_answer.json' | head -1) && TIMESTAMP=$(basename "$LATEST_JSON"
    .json) && mkdir -p /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q1
    && cp /tmp/answer_without_kg_1.md /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q1/${TIMESTAMP}_answer.md
    && uv run python /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/judge_answer.py
    --results-dir /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q1
    --question-num 1 --prefix $TIMESTAMP
- name: answer_motherduck_without_kg_q2
  description: Answer Q2 about DuckDB integration via conversational mode
  conversational: true
  setup_commands:
  - uv run --project /Users/julien/Documents/wik/wikumeo/projects/kurt-core python
    /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/load_dump.py
    motherduck --skip-entities
  initial_prompt: 'Search through the .kurt/sources/ directory to answer this question:


    How does MotherDuck integrate with DuckDB?


    Please:

    1. Search for relevant markdown files in .kurt/sources/

    2. Read the most relevant files

    3. Write a comprehensive answer in markdown format to: /tmp/answer_without_kg_2.md

    4. Include a "Sources" section listing the files you used

    '
  assertions:
  - type: FileExists
    path: /tmp/answer_without_kg_2.md
  - type: FileContains
    path: /tmp/answer_without_kg_2.md
    content: DuckDB
  post_scenario_commands:
  - LATEST_JSON=$(ls -t /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q2/*.json
    2>/dev/null | grep -v '_answer.json' | head -1) && TIMESTAMP=$(basename "$LATEST_JSON"
    .json) && mkdir -p /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q2
    && cp /tmp/answer_without_kg_2.md /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q2/${TIMESTAMP}_answer.md
    && uv run python /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/judge_answer.py
    --results-dir /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q2
    --question-num 2 --prefix $TIMESTAMP
- name: answer_motherduck_without_kg_q3
  description: Answer Q3 about unsupported SQL features via conversational mode
  conversational: true
  setup_commands:
  - uv run --project /Users/julien/Documents/wik/wikumeo/projects/kurt-core python
    /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/load_dump.py
    motherduck --skip-entities
  initial_prompt: 'Search through the .kurt/sources/ directory to answer this question:


    What SQL features from DuckDB are not yet supported in MotherDuck?


    Please:

    1. Search for relevant markdown files in .kurt/sources/

    2. Read the most relevant files

    3. Write a comprehensive answer in markdown format to: /tmp/answer_without_kg_3.md

    4. Include a "Sources" section listing the files you used

    '
  assertions:
  - type: FileExists
    path: /tmp/answer_without_kg_3.md
  post_scenario_commands:
  - LATEST_JSON=$(ls -t /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q3/*.json
    2>/dev/null | grep -v '_answer.json' | head -1) && TIMESTAMP=$(basename "$LATEST_JSON"
    .json) && mkdir -p /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q3
    && cp /tmp/answer_without_kg_3.md /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q3/${TIMESTAMP}_answer.md
    && uv run python /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/judge_answer.py
    --results-dir /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q3
    --question-num 3 --prefix $TIMESTAMP
- name: answer_motherduck_without_kg_q4
  description: Answer Q4 about query performance via conversational mode
  conversational: true
  setup_commands:
  - uv run --project /Users/julien/Documents/wik/wikumeo/projects/kurt-core python
    /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/load_dump.py
    motherduck --skip-entities
  initial_prompt: 'Search through the .kurt/sources/ directory to answer this question:


    Why might a query run slower on MotherDuck than locally?


    Please:

    1. Search for relevant markdown files in .kurt/sources/

    2. Read the most relevant files

    3. Write a comprehensive answer in markdown format to: /tmp/answer_without_kg_4.md

    4. Include a "Sources" section listing the files you used

    '
  assertions:
  - type: FileExists
    path: /tmp/answer_without_kg_4.md
  post_scenario_commands:
  - LATEST_JSON=$(ls -t /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q4/*.json
    2>/dev/null | grep -v '_answer.json' | head -1) && TIMESTAMP=$(basename "$LATEST_JSON"
    .json) && mkdir -p /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q4
    && cp /tmp/answer_without_kg_4.md /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q4/${TIMESTAMP}_answer.md
    && uv run python /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/judge_answer.py
    --results-dir /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q4
    --question-num 4 --prefix $TIMESTAMP
- name: answer_motherduck_without_kg_q5
  description: Answer Q5 about dbt integration via conversational mode
  conversational: true
  setup_commands:
  - uv run --project /Users/julien/Documents/wik/wikumeo/projects/kurt-core python
    /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/load_dump.py
    motherduck --skip-entities
  initial_prompt: 'Search through the .kurt/sources/ directory to answer this question:


    How do I set up MotherDuck to work with dbt?


    Please:

    1. Search for relevant markdown files in .kurt/sources/

    2. Read the most relevant files

    3. Write a comprehensive answer in markdown format to: /tmp/answer_without_kg_5.md

    4. Include a "Sources" section listing the files you used

    '
  assertions:
  - type: FileExists
    path: /tmp/answer_without_kg_5.md
  post_scenario_commands:
  - LATEST_JSON=$(ls -t /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q5/*.json
    2>/dev/null | grep -v '_answer.json' | head -1) && TIMESTAMP=$(basename "$LATEST_JSON"
    .json) && mkdir -p /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q5
    && cp /tmp/answer_without_kg_5.md /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q5/${TIMESTAMP}_answer.md
    && uv run python /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/judge_answer.py
    --results-dir /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q5
    --question-num 5 --prefix $TIMESTAMP
- name: answer_motherduck_without_kg_q6
  description: Answer Q6 about data migration via conversational mode
  conversational: true
  setup_commands:
  - uv run --project /Users/julien/Documents/wik/wikumeo/projects/kurt-core python
    /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/load_dump.py
    motherduck --skip-entities
  initial_prompt: 'Search through the .kurt/sources/ directory to answer this question:


    How do I migrate data from a local DuckDB database to MotherDuck?


    Please:

    1. Search for relevant markdown files in .kurt/sources/

    2. Read the most relevant files

    3. Write a comprehensive answer in markdown format to: /tmp/answer_without_kg_6.md

    4. Include a "Sources" section listing the files you used

    '
  assertions:
  - type: FileExists
    path: /tmp/answer_without_kg_6.md
  post_scenario_commands:
  - LATEST_JSON=$(ls -t /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q6/*.json
    2>/dev/null | grep -v '_answer.json' | head -1) && TIMESTAMP=$(basename "$LATEST_JSON"
    .json) && mkdir -p /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q6
    && cp /tmp/answer_without_kg_6.md /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q6/${TIMESTAMP}_answer.md
    && uv run python /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/judge_answer.py
    --results-dir /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q6
    --question-num 6 --prefix $TIMESTAMP
- name: answer_motherduck_without_kg_q7
  description: Answer Q7 about CSV and S3 joins via conversational mode
  conversational: true
  setup_commands:
  - uv run --project /Users/julien/Documents/wik/wikumeo/projects/kurt-core python
    /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/load_dump.py
    motherduck --skip-entities
  initial_prompt: 'Search through the .kurt/sources/ directory to answer this question:


    If I have a CSV on my laptop and a table in S3, what''s the most efficient way
    to join them using MotherDuck?


    Please:

    1. Search for relevant markdown files in .kurt/sources/

    2. Read the most relevant files

    3. Write a comprehensive answer in markdown format to: /tmp/answer_without_kg_7.md

    4. Include a "Sources" section listing the files you used

    '
  assertions:
  - type: FileExists
    path: /tmp/answer_without_kg_7.md
  post_scenario_commands:
  - LATEST_JSON=$(ls -t /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q7/*.json
    2>/dev/null | grep -v '_answer.json' | head -1) && TIMESTAMP=$(basename "$LATEST_JSON"
    .json) && mkdir -p /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q7
    && cp /tmp/answer_without_kg_7.md /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q7/${TIMESTAMP}_answer.md
    && uv run python /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/judge_answer.py
    --results-dir /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q7
    --question-num 7 --prefix $TIMESTAMP
- name: answer_motherduck_without_kg_q8
  description: Answer Q8 about database vs share via conversational mode
  conversational: true
  setup_commands:
  - uv run --project /Users/julien/Documents/wik/wikumeo/projects/kurt-core python
    /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/load_dump.py
    motherduck --skip-entities
  initial_prompt: 'Search through the .kurt/sources/ directory to answer this question:


    What''s the difference between a MotherDuck database and a share?


    Please:

    1. Search for relevant markdown files in .kurt/sources/

    2. Read the most relevant files

    3. Write a comprehensive answer in markdown format to: /tmp/answer_without_kg_8.md

    4. Include a "Sources" section listing the files you used

    '
  assertions:
  - type: FileExists
    path: /tmp/answer_without_kg_8.md
  post_scenario_commands:
  - LATEST_JSON=$(ls -t /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q8/*.json
    2>/dev/null | grep -v '_answer.json' | head -1) && TIMESTAMP=$(basename "$LATEST_JSON"
    .json) && mkdir -p /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q8
    && cp /tmp/answer_without_kg_8.md /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q8/${TIMESTAMP}_answer.md
    && uv run python /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/judge_answer.py
    --results-dir /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q8
    --question-num 8 --prefix $TIMESTAMP
- name: answer_motherduck_without_kg_q9
  description: Answer Q9 about compute instance sizes via conversational mode
  conversational: true
  setup_commands:
  - uv run --project /Users/julien/Documents/wik/wikumeo/projects/kurt-core python
    /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/load_dump.py
    motherduck --skip-entities
  initial_prompt: 'Search through the .kurt/sources/ directory to answer this question:


    What compute instance sizes does MotherDuck offer?


    Please:

    1. Search for relevant markdown files in .kurt/sources/

    2. Read the most relevant files

    3. Write a comprehensive answer in markdown format to: /tmp/answer_without_kg_9.md

    4. Include a "Sources" section listing the files you used

    '
  assertions:
  - type: FileExists
    path: /tmp/answer_without_kg_9.md
  post_scenario_commands:
  - LATEST_JSON=$(ls -t /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q9/*.json
    2>/dev/null | grep -v '_answer.json' | head -1) && TIMESTAMP=$(basename "$LATEST_JSON"
    .json) && mkdir -p /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q9
    && cp /tmp/answer_without_kg_9.md /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q9/${TIMESTAMP}_answer.md
    && uv run python /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/judge_answer.py
    --results-dir /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q9
    --question-num 9 --prefix $TIMESTAMP
- name: answer_motherduck_without_kg_q10
  description: Answer Q10 about DuckDB versions via conversational mode
  conversational: true
  setup_commands:
  - uv run --project /Users/julien/Documents/wik/wikumeo/projects/kurt-core python
    /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/load_dump.py
    motherduck --skip-entities
  initial_prompt: 'Search through the .kurt/sources/ directory to answer this question:


    What DuckDB versions does MotherDuck currently support?


    Please:

    1. Search for relevant markdown files in .kurt/sources/

    2. Read the most relevant files

    3. Write a comprehensive answer in markdown format to: /tmp/answer_without_kg_10.md

    4. Include a "Sources" section listing the files you used

    '
  assertions:
  - type: FileExists
    path: /tmp/answer_without_kg_10.md
  post_scenario_commands:
  - LATEST_JSON=$(ls -t /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q10/*.json
    2>/dev/null | grep -v '_answer.json' | head -1) && TIMESTAMP=$(basename "$LATEST_JSON"
    .json) && mkdir -p /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q10
    && cp /tmp/answer_without_kg_10.md /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q10/${TIMESTAMP}_answer.md
    && uv run python /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/mock/generators/judge_answer.py
    --results-dir /Users/julien/Documents/wik/wikumeo/projects/kurt-core/eval/results/answer_motherduck_without_kg_q10
    --question-num 10 --prefix $TIMESTAMP
- name: answer_motherduck_without_kg_aggregate
  description: Aggregate all conversational transcripts and evaluate with LLM judge
  conversational: false
  assertions:
  - type: FileExists
    path: eval/results/answer_motherduck_without_kg_aggregate/evaluation_results.json
  - type: FileExists
    path: eval/results/answer_motherduck_without_kg_aggregate/full_transcript.md
