# Kurt Evaluation Scenarios - Answer Command
#
# Simple scenario for testing the answer command with ACME documentation

scenarios:
  - name: answer_acme_api
    description: Answer question about ACME API using pre-built knowledge graph
    project: acme-docs

    notes: |
      Tests the answer command's basic functionality:
      - Load pre-built knowledge graph from acme-docs dump
      - Answer a general question about the API
      - Verify the answer contains relevant content

    initial_prompt: |
      Run the kurt answer command to answer this question:

      What is ACME API?

      Use this exact command:
      KURT_TELEMETRY_DISABLED=1 uv run kurt answer "What is ACME API?"

    assertions:
      # Verify knowledge graph is populated
      - type: SQLQueryAssertion
        query: SELECT COUNT(*) >= 8 FROM entities

      - type: SQLQueryAssertion
        query: SELECT COUNT(*) >= 4 FROM documents

      # Verify answer contains expected content
      - type: ConversationContains
        pattern: "(?i)ACME"

      - type: ConversationContains
        pattern: "(?i)API"

      # Verify conversation completed
      - type: MetricEquals
        metric_path: conversation.completed
        expected_value: true
