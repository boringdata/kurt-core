# Answer

Based on the available documentation, MotherDuck is built on DuckDB and maintains compatibility with DuckDB's core SQL features. However, there are some architectural differences and limitations inherent to MotherDuck's cloud-based nature compared to local DuckDB:

## Storage Model Differences

**Single-Writer File System**: DuckDB's native file format is optimized for a single writer on a local file system. This model is not well-suited for the cloud, where multiple users need to read and write to the same database concurrently. MotherDuck addresses this by implementing a differential storage system that maps a logical database file to append-only snapshot layers in cloud object storage, which is fundamentally different from DuckDB's local file-based approach.

## Hybrid Execution Model

MotherDuck uses a **dual execution** architecture where queries can run either locally on the client, remotely in the MotherDuck cloud, or as a hybrid of both. While this is powerful, it means that certain operations may behave differently than in pure local DuckDB. The optimizer automatically decides query execution location, though users can override this with the `md_run` parameter in functions like `read_parquet()` or `read_csv()`.

## Collaboration and Concurrency

While DuckDB is fundamentally a "single-player" embedded database, MotherDuck transforms it into a collaborative "multiplayer" platform. This requires architectural differences in how concurrent writes are handled. MotherDuck provides isolated compute instances (called "ducklings") per user to handle concurrent access, whereas local DuckDB has limited support for concurrent writes to ensure data integrity.

## Storage Backend

MotherDuck uses its own storage layer rather than DuckDB's native file format. The system offers:
- **MotherDuck native storage**: Fast, low-latency storage for the data warehouse
- **DuckLake storage**: For petabyte-scale data, using a database-backed metadata catalog and S3-compatible object storage
- **Hybrid approach**: Can query data across local files, MotherDuck cloud storage, and external sources like S3

This is different from DuckDB's approach of working directly with local database files (.db files) or reading from file formats like Parquet and CSV.

## Extension System Integration

MotherDuck leverages DuckDB's extension system to add capabilities rather than forking the codebase. This means MotherDuck extends DuckDB at multiple layers including the SQL parser, optimizer, and storage interface. While this maintains compatibility, it means some features are implemented through extensions rather than being native.

## Key Architectural Components

MotherDuck's architecture consists of three main layers not present in standalone DuckDB:
1. **Client Extension**: Enables connection to MotherDuck via the `ATTACH` command
2. **Cloud Compute Layer**: Containerized DuckDB instances ("ducklings") that scale based on user needs
3. **Differential Storage Layer**: Cloud-optimized storage that enables features like database sharing and time travel

## Important Notes

The documentation does not provide an explicit list of "SQL features not supported in MotherDuck." Instead, MotherDuck is positioned as an enhancement to DuckDB that maintains SQL compatibility while adding cloud-scale capabilities like:
- Centralized Secret Manager for managing credentials
- Database sharing for team collaboration
- Time travel (with DuckLake)
- Automatic scaling and resource management

The fundamental SQL query capabilities appear to be preserved, with differences primarily in the underlying storage, execution model, and multi-user collaboration features rather than in unsupported SQL syntax or functions.

## Sources

- .kurt/sources/motherduck.com/blog/announcing-motherduck-duckdb-in-the-cloud.md - Information about hybrid execution and how MotherDuck extends DuckDB to the cloud
- .kurt/sources/motherduck.com/blog/cidr-paper-hybrid-query-processing-motherduck.md - Reference to the CIDR 2024 paper on hybrid query processing architecture
- .kurt/sources/motherduck.com/blog/announcing-motherduck-general-availability-data-warehousing-with-duckdb.md - Details on dual execution, collaboration features, and production capabilities
- .kurt/sources/motherduck.com/videos/bringing-duckdb-to-the-cloud-dual-execution-explained.md - Detailed explanation of MotherDuck's architecture including storage layer differences, dual execution model, and the three-layer architecture
- .kurt/sources/motherduck.com/blog/ducklake-motherduck.md - Information about DuckLake storage format and the challenges of using S3 vs traditional databases for metadata
- .kurt/sources/motherduck.com/blog/announcing-ducklake-support-motherduck-preview.md - Details on DuckLake's database-backed metadata approach and differences from DuckDB's file-based storage
- .kurt/sources/motherduck.com/product/duckdb-users.md - Overview of how MotherDuck transforms single-player DuckDB into multiplayer collaborative platform
- .kurt/sources/motherduck.com/learn-more/what-is-duckdb.md - Foundation information about DuckDB's core features and capabilities as baseline for comparison
