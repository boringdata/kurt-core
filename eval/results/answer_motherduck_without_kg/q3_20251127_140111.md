# Question Result: What SQL features from DuckDB are not yet supported in MotherDuck?

**Answer File**: /tmp/answer_without_kg_3.md

## Answer
# SQL Features from DuckDB Not Yet Supported in MotherDuck

Based on the MotherDuck documentation, there are several SQL features and capabilities from DuckDB that have limitations or are not yet fully supported in MotherDuck due to its cloud architecture. While MotherDuck maintains strong compatibility with DuckDB and uses the same engine both locally and in the cloud, some advanced features remain unavailable on the server-side.

## Key Unsupported Features

### 1. Multiple Simultaneous Writers

**Limitation:** MotherDuck currently **only supports one writer per database** at a time. While multiple users can read from the same shared database simultaneously, only one user can have write access.

**Why:** This is a fundamental architectural constraint of MotherDuck's storage system. Even though MotherDuck has solved the "reading while writing" problem through its differential storage engine and snapshot isolation, the multiple writer problem remains unsolved.

**Impact:** Workloads requiring simultaneous writes from different users need to be structured carefully. In practice, the typical pattern is:
- Data ingestion and transformation done by a shared service account
- Reading can be done by many different users
- Data writes to separate data universes can be split between service accounts

**Future:** MotherDuck is working on multi-writer support by routing writes to a single backend, simulating multiple writers even though DuckDB doesn't natively allow it.

### 2. Real-Time Write Visibility for Shared Databases

**Limitation:** When databases are shared with other users, there can be a **delay before readers see the latest changes** made by the database owner.

**Two Modes:**
- **AUTOUPDATE shares:** Changes are published to readers as soon as possible, but there can still be a small delay
- **Manual shares:** Require explicit `UPDATE SHARE` commands to publish changes to readers

**Why:** To give readers a "clean snapshot" of the data, MotherDuck ensures consistency at the storage layer. Readers might not be able to see up-to-the-moment changes being written by the owner.

**Use Case:** Sometimes this delay is actually useful - for example, when making a handful of changes that should appear together, or running unit tests before publishing results.

**Future:** MotherDuck is working to reduce this gap and will introduce upper bounds guarantees on how long it takes to publish data.

### 3. Custom User-Defined Functions (UDFs)

**Python UDFs and Native UDFs** are not supported on the MotherDuck server-side. This includes:
- Custom Python functions that extend DuckDB's capabilities
- Native/compiled UDFs written in C/C++

**Workaround**: Perform these transformations upstream (on the client-side or in your data pipeline) before loading data into MotherDuck.

### 4. Server-Side `ATTACH` Operations

The **`ATTACH` statement** for connecting to other databases (such as PostgreSQL, MySQL, or SQLite) is not available on the MotherDuck server. DuckDB locally supports attaching to various databases to query them directly, but this capability is not yet enabled in MotherDuck's cloud environment.

**Workaround**: Export data from external databases and load it into MotherDuck, or perform cross-database queries locally using DuckDB's dual execution model.

### 5. Custom Extensions

**Custom DuckDB extensions** cannot be loaded on the MotherDuck server. While DuckDB has a rich ecosystem of extensions for various data formats, protocols, and functionality (spatial data, HTTP, JSON, etc.), custom or third-party extensions beyond what MotherDuck provides are not supported in the cloud environment.

**Why:** MotherDuck uses DuckDB's extension system to add its own capabilities, but for security and stability reasons in a multi-tenant cloud environment, not all custom or third-party extensions may be supported.

**Workaround**: Use client-side DuckDB with the required extensions for preprocessing, or leverage MotherDuck's supported built-in extensions.

### 6. Certain DuckDB Configuration Settings

**Limitation:** Some DuckDB PRAGMA settings or configuration options that control local behavior (like memory limits, thread counts for local execution, or file system paths) may work differently or not be available in MotherDuck's cloud environment.

**Why:** MotherDuck manages compute resources through its containerized "ducklings" and handles resource allocation at the platform level.

## Architectural Context and Differences

It's important to understand that these limitations stem from MotherDuck's serverless, managed architecture. MotherDuck prioritizes:
- **Security**: Preventing arbitrary code execution in the cloud environment
- **Performance**: Maintaining predictable, optimized query execution
- **Stability**: Ensuring consistent behavior across all users

The dual-execution model allows many of these operations to be performed locally on the client side, where full DuckDB functionality is available, while still benefiting from MotherDuck's cloud-scale storage and compute for large datasets.

### Storage Model Differences

While not "unsupported features," it's important to understand these architectural differences:

1. **In-Place File Mutations:** DuckDB's native file format is optimized for a single writer on a local file system. MotherDuck doesn't support this model directly because cloud object stores like S3 have immutable files. MotherDuck uses a **differential storage system** that sits at the filesystem layer, making it appear like data has been updated in-place while actually using append-only files underneath.

2. **Write-Ahead Log (WAL):** DuckDB often skips the WAL for batch updates as a performance optimization. MotherDuck's architecture handles this differently by implementing separation at a lower filesystem layer using differential storage rather than relying on WAL-based replication.

3. **Database File Model:** MotherDuck uses a differential storage engine with append-only files and metadata tracking, rather than DuckDB's single-file model. This enables features like zero-copy data sharing and database snapshots.

## Other Considerations

### Regional Availability
While not a SQL feature limitation, MotherDuck currently operates in:
- AWS `us-east-1` (US East)
- AWS `eu-central-1` (Frankfurt, Europe)

Teams with strict data residency requirements outside these regions will need to consider this constraint.

### Workload Limitations
MotherDuck is optimized for **OLAP (analytical)** workloads, not **OLTP (transactional)** workloads. This means:
- Not designed for thousands of concurrent, low-latency writes and updates per second
- Database-level permissions rather than fine-grained row-level security
- Not currently designed to serve thousands of simultaneous public-facing analytical queries

## Compatibility Strengths

Despite these limitations, MotherDuck maintains excellent compatibility with DuckDB for the vast majority of analytical SQL operations, including:
- Full SQL query syntax support
- Columnar storage and vectorized execution
- ACID transactions (with serializable isolation)
- Complex joins and aggregations
- Direct querying of Parquet, CSV, and JSON files
- Integration with cloud object storage (S3, GCS, Azure Blob Storage)
- Hybrid execution (joining local and cloud data)

## Future Roadmap

MotherDuck is actively working on:
- Multi-writer support by routing writes to a single backend
- Reduced latency for share updates with guaranteed upper bounds
- Time travel and branching features (made easy by immutable storage)
- Improved caching for faster 'warm start' access

## Summary

Most SQL features from DuckDB **are supported** in MotherDuck. The main limitations are:
1. **Single writer per database** (no concurrent writes)
2. **Eventual consistency for shared databases** (small delay in seeing changes)
3. **Custom Python/Native User-Defined Functions (UDFs)**
4. **Server-side `ATTACH` to external databases**
5. **Custom DuckDB extensions**
6. **Different underlying storage model** (append-only vs. in-place updates)

These limitations are trade-offs made to enable MotherDuck's key benefits: cloud scale, collaboration, data sharing, and separation of storage and compute while maintaining ACID compliance. For most analytical workloads, the combination of MotherDuck's cloud capabilities and local DuckDB's full feature set (via dual execution) provides a powerful and flexible solution.

---

## Usage
- Tokens Used: 9117
- Duration: 230.03 seconds

## LLM Judge Evaluation
- Overall Score: 1.0
  - Accuracy: 1.0
  - Completeness: 1.0
  - Relevance: 1.0
  - Clarity: 1.0

**Feedback**:
The generated answer is highly accurate, complete, relevant, and clear. It effectively addresses the question by detailing the specific SQL features from DuckDB that are not supported in MotherDuck, while also providing context and potential workarounds. The structured format enhances readability and understanding, making it an excellent response.
